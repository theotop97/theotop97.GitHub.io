<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://theotop97.github.io</id>
    <title>Theo&apos;s Blogs</title>
    <updated>2021-05-16T16:35:27.852Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://theotop97.github.io"/>
    <link rel="self" href="https://theotop97.github.io/atom.xml"/>
    <subtitle>温故而知新</subtitle>
    <logo>https://theotop97.github.io/images/avatar.png</logo>
    <icon>https://theotop97.github.io/favicon.ico</icon>
    <rights>All rights reserved 2021, Theo&apos;s Blogs</rights>
    <entry>
        <title type="html"><![CDATA[移动测试--adb命令使用]]></title>
        <id>https://theotop97.github.io/post/test-android/</id>
        <link href="https://theotop97.github.io/post/test-android/">
        </link>
        <updated>2021-05-15T15:37:12.000Z</updated>
        <content type="html"><![CDATA[<h1 id="简介">简介</h1>
<p>adb ( Android Debug Bridge)是一个通用命令行工具，其允许您与模拟器实例或连接的 Android 设备进行通信。它可为各种设备操作提供便利，如安装和调试应用。</p>
<h1 id="配置">配置</h1>
<p>需要配置adb环境，根据个人机器和喜好配置即可。</p>
<h1 id="常用命令">常用命令</h1>
<p><strong>启停服务</strong></p>
<ul>
<li><code>adb kill-server</code></li>
<li><code>adb start-server</code></li>
</ul>
<p><strong>查看已连接的设备</strong></p>
<ul>
<li><code>adb devices</code></li>
</ul>
<p><strong>获取设备的状态</strong></p>
<ul>
<li>
<p><code>adb get-state</code></p>
<blockquote>
<p>设备的状态有 3 种：</p>
<p>​		<code>device</code>：设备正常连接</p>
<p>​		<code>offline</code>：连接出现异常，设备无响应</p>
<p>​		<code>unknown</code>：没有连接设备</p>
</blockquote>
</li>
</ul>
<p><strong>查看设备安装的应用</strong></p>
<ul>
<li>
<p><code>adb shell pm list package xxx(应用名</code></p>
<ul>
<li>-s: 列出系统应用</li>
<li>-3: 列出第三方应用</li>
<li>-f: 列出应用包名及对应的apk名及存放位置</li>
<li>-i: 列出应用包名及其安装来源，结果显示例子</li>
</ul>
<blockquote>
<p>命令最后增加 FILTER：过滤关键字，可以很方便地查找自己想要的应用</p>
<pre><code class="language-shell">adb shell pm list package -f -3 -i qq  

package:/mnt/asec/com.tencent.mobileqq-bkqW0nLSfyRsIjb5/base.apk=com.tencent.mobileqq installer=com.samsung.android.packageinstaller
</code></pre>
</blockquote>
</li>
<li>
<p><code>pm path</code> 列出对应包名的 .apk 位置</p>
<pre><code class="language-shell">adb shell pm path com.tencent.mobileqq
package:/mnt/asec/com.tencent.mobileqq-bkqW0nLSfyRsIjb5/base.apk
</code></pre>
</li>
</ul>
<p><strong>给设备安装应用</strong></p>
<ul>
<li>
<p><code>adb install</code></p>
<blockquote>
<p><code>-r:</code> 覆盖原安装文件</p>
<p><code>-s:</code>指定设备</p>
</blockquote>
<ul>
<li>
<p><strong>默认安装</strong></p>
<p><code>adb install /xxxxx/xxxxx/xxx.apk</code></p>
</li>
</ul>
</li>
</ul>
<p><strong>卸载设备应用</strong></p>
<ul>
<li>
<p><code>adb uninstall packagename</code></p>
<blockquote>
<p>adb uninstall com.tencent.mobileqq</p>
</blockquote>
</li>
</ul>
<p><strong>文件从PC push到设备</strong></p>
<ul>
<li><code>adb push /Users/kyb.txt /sdcard</code></li>
</ul>
<p><strong>文件从设备pull到PC</strong></p>
<ul>
<li><code>adb pull /sdcard/server.log /Users</code></li>
</ul>
<blockquote>
<p>图片不要用<code>.jpg</code></p>
</blockquote>
<p><strong>屏幕截图</strong></p>
<ul>
<li><code>adb shell screencap 截图存放截图位置</code></li>
</ul>
<blockquote>
<p><code>adb shell screencap /sdcard/screen.png</code></p>
</blockquote>
<p><strong>dumpsys工具</strong></p>
<ul>
<li>
<p>activity栈信息：<code>adb shell dumpsys activity</code></p>
<blockquote>
<p>查看当前活动的Activity</p>
<pre><code class="language-shell">adb shell dumpsys window windows | grep &quot;mCurrentFocus&quot;
mCurrentFocus=Window{7ba82b1 u0 com.tencent.mobileqq/com.tencent.mobileqq.activity.SplashActivity}
</code></pre>
<p>com.tencent.mobileqq: 包名</p>
<p>com.tencent.mobileqq.activity.SplashActivity： Activity名</p>
</blockquote>
</li>
<li>
<p>内存信息：<code>adb shell dumpsys meminfo</code></p>
</li>
<li>
<p>电池信息：<code>adb shell dumpsys battery</code></p>
</li>
</ul>
]]></content>
    </entry>
</feed>